---
title: "Tracking COVID-19 in the United States"
output:
  html_document:
    highlight: "tango"
---

```{r, include = FALSE}
knitr::opts_chunk$set(echo=FALSE) 
```


```{r index-outside-scripts, results="hide", warning=FALSE, message=FALSE, include = FALSE}
output_type <- "Rmd"
source("script/variable/setup.R")
source("script/dataframe/covid19_state.R") #run script for covid19 df
source("script/dataframe/covid19_county.R") #run script for covid19 df
source("script/variable/parameters.R") #global parameters
```


```{r index-data-date}
data_date <- covid19 %>% pull(date) %>% max()
```


```{r index-mod-dates}
mod_dates <- tribble(
       ~type,           ~name, ~mod_date
  , "script", "setup"        , file.info("script/variable/setup.R")$mtime
  , "script", "colors"       , file.info("script/variable/colors.R")$mtime
  , "script", "covid df"     , file.info("script/dataframe/covid19_state.R")$mtime
  , "script", "covid cnty df", file.info("script/dataframe/covid19_county.R")$mtime
  , "script", "param"        , file.info("script/variable/parameters.R")$mtime
  , "rmd"   , "overview"     , file.info("overview.Rmd")$mtime
  , "rmd"   , "growth_factor", file.info("growth_factor.Rmd")$mtime
  , "rmd"   , "state"        , file.info("state.Rmd")$mtime
  , "rmd"   , "data_source"  , file.info("data_source.Rmd")$mtime
  , "rmd"   , "current"      , file.info("current.Rmd")$mtime
  , "rmd"   , "total"        , file.info("total_cases.Rmd")$mtime
)
```


# {.tabset}


## Overview  


Data as of `r data_date`  
 

```{r child="overview.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(type == "script" | name == "overview") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 

## Growth Factor  

Data as of `r data_date`  

```{r child="growth_factor.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(type == "script" | name == "growth_factor") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 

## State Trends


Data as of `r data_date`  

```{r child="state.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(type == "script" | name == "state") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 


## Current New Cases


Data as of `r data_date`  

```{r child="current.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(type == "script" | name == "current") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 


## Total Cases


Data as of `r data_date`  

```{r child="total_cases.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(type == "script" | name == "total_cases") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 


## Data  

Data as of `r data_date`  


```{r child="data_source.Rmd"}
```

```{r}
last_mod <- mod_dates %>% filter(name == "data_source") %>% pull(mod_date) %>% max() %>% format(., "%Y-%m-%d")
```
Code for this page last modified: `r last_mod` 

